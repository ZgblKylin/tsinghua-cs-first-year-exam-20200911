# 正方形大师 难度1

![](images/SquareMaster.jpg)

## 双击生成正方形
- 用数组记录正方形矩形区域。
- 用count记录正方形个数，同时可作为新正方形填充的索引（count - 1）
- 用update()请求重绘

## 左键单击选中正方形，右键单击取消选中
- 增加selected标志位标识是否选中。
- 由于被选中正方形自动提升至顶部，因此无需记录被选中正方形的索引

## 键盘移动选中正方形
- 使用grabKeyboard()/releaseKeyboard()捕获键盘事件
- 使用QRect::translate进行dx/dy相对移动
- 使用qMin/qMax计算移动后的坐标，避免超出范围

## 拖动被选中正方形
- 鼠标在被选中正方形区域内按下时激活拖动，记录坐标
- 鼠标移动时，若有坐标记录则是激活拖动，与当前坐标计算差值，移动正方形，并更新坐标
- 鼠标释放时，执行最后一次移动，并重置鼠标坐标为无效值

## 保存读取
- 这里题目设置有坑，说好的保存格式自行设计，但根据评分标准只能保存成可视化文本文件，不能存二进制
- 使用txt文本文件保存
- 使用QFileDialog文件对话框获取文件路径
- 使用QFile操作文件
- 使用QTextStream操作文本
  - 输出时使用空格分隔坐标，使用换行分隔对象
  - 输入时可通过QTextStream::skipWhiteSpace()忽略换行和空格
